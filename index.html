<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RÃ©vision BA L2 - Banques et Assurances</title>
    
    <!-- PWA Setup -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#003366">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="top-nav">
        <div class="nav-content">
            <div class="developer-info">
                <span>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: </span>
                <a href="https://wa.me/22220479962" target="_blank" class="dev-name">
                    <i class="fab fa-whatsapp"></i> Mohamed Dah Agove
                </a>
            </div>
            <div class="dua-text">â¤ï¸ Ù„Ø§ ØªÙ†Ø³ÙˆÙ†Ø§ Ù…Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø¯Ø¹Ø§Ø¡</div>
        </div>
    </nav>

    <header class="main-header">
        <div class="header-overlay">
            <h1>RÃ©vision BA L2</h1>
            <p>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© - Banques et Assurances</p>
        </div>
    </header>

    <div class="container">
        
        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="semester-selection" class="section-box fade-in">
            <h2 class="section-title">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            
            <!-- Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª -->
            <button id="install-btn" class="hidden install-btn-style">
                <i class="fas fa-download"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ
            </button>

            <div class="semesters-grid">
                <div class="semester-card" onclick="showSubjects('s3')">
                    <div class="icon-box"><i class="fas fa-book-open"></i></div>
                    <h3>Semestre 3</h3>
                    <p>Technique Bancaire, Marketing...</p>
                </div>

                <div class="semester-card" onclick="showSubjects('s4')">
                    <div class="icon-box"><i class="fas fa-graduation-cap"></i></div>
                    <h3>Semestre 4</h3>
                    <p>Assurances, Finance...</p>
                </div>

                <div class="semester-card result-card" onclick="window.location.href='https://resultat-iscae.vercel.app/'">
                    <div class="icon-box"><i class="fas fa-chart-line"></i></div>
                    <h3>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
                    <p>Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ ISCAE</p>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ -->
        <div id="subjects-container" class="section-box hidden">
            <div class="header-with-back">
                <button class="back-btn" onclick="goBackToSemesters()"><i class="fas fa-arrow-right"></i> Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                <h2 id="current-semester-title" class="section-title">Ù…ÙˆØ§Ø¯ Ø§Ù„ÙØµÙ„</h2>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ù…ÙˆØ§Ø¯ S3 -->
            <div id="s3-list" class="buttons-grid hidden">
                <button onclick="loadFiles('Anglais des affaires')">Anglais des affaires</button>
                <button onclick="loadFiles('MÃ©thodes dâ€™aide Ã  la dÃ©cision')">MÃ©thodes dâ€™aide Ã  la dÃ©cision</button>
                <button onclick="loadFiles('Logiciels Bancaire')">Logiciels Bancaire</button>
                <button onclick="loadFiles('Marketing')">Marketing</button>
                <button onclick="loadFiles('ComptabilitÃ© des SociÃ©tÃ©s')">ComptabilitÃ© des SociÃ©tÃ©s</button>
                <button onclick="loadFiles('Droit administrative')">Droit administrative</button>
                <button onclick="loadFiles('Technique Bancaire')">Technique Bancaire</button>
                <button onclick="loadFiles('MacroÃ©conomie')">MacroÃ©conomie</button>
                <button onclick="loadFiles('Gestion FinanciÃ¨re')">Gestion FinanciÃ¨re</button>
                <button onclick="loadFiles('SystÃ¨me financier mauritanien')">SystÃ¨me financier mauritanien</button>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ù…ÙˆØ§Ø¯ S4 -->
            <div id="s4-list" class="buttons-grid hidden">
                <button onclick="loadFiles('ComptabilitÃ© des SociÃ©tÃ© assurance')">ComptabilitÃ© des Assurances</button>
                <button onclick="loadFiles('Assurances des biens')">Assurances des biens</button>
                <button onclick="loadFiles('ComptabilitÃ© Bancaire')">ComptabilitÃ© Bancaire</button>
                <button onclick="loadFiles('ComptabilitÃ© de Gestion')">ComptabilitÃ© de Gestion</button>
                <button onclick="loadFiles('Finance des marchÃ©s')">Finance des marchÃ©s</button>
                <button onclick="loadFiles('Analyse FinanciÃ¨re')">Analyse FinanciÃ¨re</button>
                <button onclick="loadFiles('Gestion de la trÃ©sorerie')">Gestion de la trÃ©sorerie</button>
                <button onclick="loadFiles('GRH')">GRH</button>
                <button onclick="loadFiles('Droit des assurances')">Droit des assurances</button>
                <button onclick="loadFiles('Commerce international')">Commerce international</button>
            </div>
        </div>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª -->
        <div id="file-list-container" class="section-box hidden">
            <h3>ğŸ“‚ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©: <span id="selected-subject-name" class="highlight-text"></span></h3>
            <ul id="pdf-list"></ul>
            <div id="loading-spinner" class="spinner hidden"></div>
            <p id="no-files-msg" class="hidden error-msg">âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«.</p>
        </div>

    </div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
    <div id="pdf-viewer-overlay" class="hidden">
        <div class="viewer-header">
            <div style="display:flex; align-items:center; gap:10px;">
                <button onclick="closePdfViewer()" class="close-viewer-btn"><i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚</button>
                <span id="viewer-filename" style="font-size:0.9rem; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; max-width:150px; color:#ddd;">Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</span>
            </div>
            <button id="viewer-action-btn" class="external-btn"><i class="fas fa-external-link-alt"></i> ÙØªØ­ Ø®Ø§Ø±Ø¬ÙŠ</button>
        </div>
        <div id="pdf-render-area"></div>
        <div id="rendering-msg">
            <div class="spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ù„Ù...</p>
            <p style="font-size:0.8rem; opacity:0.8; margin-top:5px;">Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¸Ù‡Ø±ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ÙØªØ­ Ø®Ø§Ø±Ø¬ÙŠ"</p>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø£ÙŠÙÙˆÙ† -->
    <div id="ios-install-modal" class="hidden">
        <div class="ios-modal-content">
            <h3>ğŸ“± Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙŠÙÙˆÙ†</h3>
            <p>Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
            <ol>
                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± <strong>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</strong> <i class="fas fa-share-square"></i> ÙÙŠ Ø£Ø³ÙÙ„ Ø§Ù„Ù…ØªØµÙØ­.</li>
                <li>Ø§Ù†Ø²Ù„ Ù„Ù„Ø£Ø³ÙÙ„ ÙˆØ§Ø®ØªØ± <br> <strong>"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"</strong> <br> (Add to Home Screen).</li>
                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ <strong>Ø¥Ø¶Ø§ÙØ©</strong> (Add).</li>
            </ol>
            <button onclick="document.getElementById('ios-install-modal').classList.add('hidden')">Ø­Ø³Ù†Ø§Ù‹ØŒ ÙÙ‡Ù…Øª</button>
        </div>
    </div>

    <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ -->
    <footer class="main-footer">
        <div class="footer-content">
            <p class="validation-text">âœ¨ Ø§ØªØ¯ÙˆØ±Ùˆ ØªÙØ§Ù„ÙŠØ¯Ùˆ Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ âœ¨</p>
            <div class="footer-divider"></div>
            <div class="dev-credit">
                <p>
                    ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± <i class="fas fa-heart pulse-icon"></i> Ø¨ÙˆØ§Ø³Ø·Ø©
                    <br>
                    <a href="https://wa.me/22220479962" target="_blank" class="dev-link-pro">
                        <i class="fab fa-whatsapp"></i> Mohamed Dah Agove
                    </a>
                </p>
            </div>
            <p class="copyright">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© <span id="current-year">2025</span></p>
        </div>
    </footer>

    <script src="script.js"></script>

    <!-- Ø³ÙƒØ±Ø¨Øª Ø§Ù„ØªØ«Ø¨ÙŠØª (Ø§Ù„Ù…Ø­Ø¯Ø« Ù„Ù„Ø£ÙŠÙÙˆÙ†) -->
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').catch(console.error);
        }

        const installBtn = document.getElementById('install-btn');
        let deferredPrompt;

        // âœ… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø£ÙŠÙÙˆÙ† Ø§Ù„Ù‚ÙˆÙŠØ©
        // Ù†ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³ØªØ®Ø¯Ù… iPhone Ø£Ùˆ iPad (Ø­ØªÙ‰ Ø§Ù„Ø¢ÙŠØ¨Ø§Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ø°ÙŠ ÙŠØ¯Ø¹ÙŠ Ø£Ù†Ù‡ Ù…Ø§Ùƒ)
        const isIos = /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()) || 
                      (window.navigator.userAgent.includes("Mac") && "ontouchend" in document);

        // Ù‡Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø«Ø¨Øª Ø¨Ø§Ù„ÙØ¹Ù„ØŸ
        const isInStandaloneMode = ('standalone' in window.navigator) && (window.navigator.standalone);

        // âœ… ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù†Ø·Ù‚
        if (isIos && !isInStandaloneMode) {
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø£ÙŠÙÙˆÙ† ÙˆÙ„Ù… ÙŠØ«Ø¨Øª -> Ø£Ø¸Ù‡Ø± Ø§Ù„Ø²Ø± ÙÙˆØ±Ø§Ù‹
            installBtn.classList.remove('hidden');
            installBtn.style.display = "block"; // ÙØ±Ø¶ Ø§Ù„Ø¸Ù‡ÙˆØ±
            installBtn.innerHTML = '<i class="fab fa-apple"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (iPhone)';
            
            // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·ØŒ Ø§ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
            installBtn.addEventListener('click', () => {
                document.getElementById('ios-install-modal').classList.remove('hidden');
            });
        } 
        else {
            // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (ÙƒÙ…Ø§ Ù‡Ùˆ)
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                installBtn.classList.remove('hidden');
                installBtn.style.display = "block";
                installBtn.innerHTML = '<i class="fas fa-download"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ';
            });

            installBtn.addEventListener('click', () => {
                if (deferredPrompt) {
                    installBtn.classList.add('hidden');
                    deferredPrompt.prompt();
                    deferredPrompt = null;
                }
            });
        }
    </script>
</body>
</html>