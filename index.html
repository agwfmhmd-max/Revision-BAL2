<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RÃ©vision BA L2 - Banques et Assurances</title>
    
    <!-- âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª (PWA) -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#003366">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Ø§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>
<body>

    <nav class="top-nav">
        <div class="nav-content">
            <div class="developer-info">
                <span>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: </span>
                <a href="https://wa.me/22220479962" target="_blank" class="dev-name">
                    <i class="fab fa-whatsapp"></i> Mohamed Dah Agove
                </a>
            </div>
            <div class="dua-text">â¤ï¸ Ù„Ø§ ØªÙ†Ø³ÙˆÙ†Ø§ Ù…Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø¯Ø¹Ø§Ø¡</div>
        </div>
    </nav>

    <header class="main-header">
        <div class="header-overlay">
            <h1>RÃ©vision BA L2</h1>
            <p>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© - Banques et Assurances</p>
        </div>
    </header>

    <div class="container">
        
        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="semester-selection" class="section-box fade-in">
            <h2 class="section-title">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            
            <!-- âœ… Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹) -->
            <button id="install-btn" class="hidden" style="width:100%; margin-bottom:20px; background:#2e7d32; color:white; border:none; padding:15px; border-radius:10px; font-weight:bold; cursor:pointer;">
                <i class="fas fa-download"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ
            </button>

            <div class="semesters-grid">
                <div class="semester-card" onclick="showSubjects('s3')">
                    <div class="icon-box"><i class="fas fa-book-open"></i></div>
                    <h3>Semestre 3</h3>
                    <p>Technique Bancaire, Marketing...</p>
                </div>

                <div class="semester-card" onclick="showSubjects('s4')">
                    <div class="icon-box"><i class="fas fa-graduation-cap"></i></div>
                    <h3>Semestre 4</h3>
                    <p>Assurances, Finance...</p>
                </div>

                <div class="semester-card" onclick="window.location.href='https://resultat-iscae.vercel.app/'">
                    <div class="icon-box"><i class="fas fa-chart-line"></i></div>
                    <h3>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
                    <p>Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ ISCAE</p>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ -->
        <div id="subjects-container" class="section-box hidden">
            <div class="header-with-back">
                <button class="back-btn" onclick="goBackToSemesters()"><i class="fas fa-arrow-right"></i> Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                <h2 id="current-semester-title" class="section-title">Ù…ÙˆØ§Ø¯ Ø§Ù„ÙØµÙ„</h2>
            </div>

            <!-- Ù…ÙˆØ§Ø¯ S3 -->
            <div id="s3-list" class="buttons-grid hidden">
                <button onclick="loadFiles('Technique Bancaire')">Technique Bancaire</button>
                <button onclick="loadFiles('SystÃ¨me financier mauritanien')">SystÃ¨me financier mauritanien</button>
                <button onclick="loadFiles('Gestion FinanciÃ¨re')">Gestion FinanciÃ¨re</button>
                <button onclick="loadFiles('ComptabilitÃ© des SociÃ©tÃ©s')">ComptabilitÃ© des SociÃ©tÃ©s</button>
                <button onclick="loadFiles('Anglais des affaires')">Anglais des affaires</button>
                <button onclick="loadFiles('Logiciels Bancaire')">Logiciels Bancaire</button>
                <button onclick="loadFiles('Marketing')">Marketing</button>
                <button onclick="loadFiles('Droit administrative')">Droit administrative</button>
                <button onclick="loadFiles('MacroÃ©conomie')">MacroÃ©conomie</button>
                <button onclick="loadFiles('MÃ©thodes dâ€™aide Ã  la dÃ©cision')">MÃ©thodes dâ€™aide Ã  la dÃ©cision</button>
            </div>

            <!-- Ù…ÙˆØ§Ø¯ S4 -->
            <div id="s4-list" class="buttons-grid hidden">
                <button onclick="loadFiles('ComptabilitÃ© des SociÃ©tÃ© assurance')">ComptabilitÃ© des Assurances</button>
                <button onclick="loadFiles('Assurances des biens')">Assurances des biens</button>
                <button onclick="loadFiles('ComptabilitÃ© Bancaire')">ComptabilitÃ© Bancaire</button>
                <button onclick="loadFiles('ComptabilitÃ© de Gestion')">ComptabilitÃ© de Gestion</button>
                <button onclick="loadFiles('Finance des marchÃ©s')">Finance des marchÃ©s</button>
                <button onclick="loadFiles('Analyse FinanciÃ¨re')">Analyse FinanciÃ¨re</button>
                <button onclick="loadFiles('Gestion de la trÃ©sorerie')">Gestion de la trÃ©sorerie</button>
                <button onclick="loadFiles('GRH')">GRH</button>
                <button onclick="loadFiles('Droit des assurances')">Droit des assurances</button>
                <button onclick="loadFiles('Commerce international')">Commerce international</button>
            </div>
        </div>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª -->
        <div id="file-list-container" class="section-box hidden">
            <h3>ğŸ“‚ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©: <span id="selected-subject-name" class="highlight-text"></span></h3>
            <ul id="pdf-list"></ul>
            <div id="loading-spinner" class="spinner hidden"></div>
            <p id="no-files-msg" class="hidden error-msg">âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§.</p>
        </div>

    </div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
    <div id="pdf-viewer-overlay" class="hidden">
        <div class="viewer-header">
            <span id="viewer-filename">Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</span>
            <button onclick="closePdfViewer()" class="close-viewer-btn"><i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
        <div id="pdf-render-area"></div>
        <div id="rendering-msg">
            <div class="spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ø³ØªÙ†Ø¯...</p>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- âœ… ÙƒÙˆØ¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ«Ø¨ÙŠØª (Service Worker) -->
    <script>
        // ØªØ³Ø¬ÙŠÙ„ Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
            .then(() => console.log('Service Worker Registered'))
            .catch(err => console.log('Service Worker Failed', err));
        }

        // Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ÙŠØ¯ÙˆÙŠ
        let deferredPrompt;
        const installBtn = document.getElementById('install-btn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.classList.remove('hidden'); // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø±
        });

        installBtn.addEventListener('click', () => {
            installBtn.classList.add('hidden');
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                }
                deferredPrompt = null;
            });
        });
    </script>
</body>
</html>